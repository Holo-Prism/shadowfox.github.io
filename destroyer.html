<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L’Ultime Défi</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // Fonction pour décoder un texte en chiffre de César (décalage de 3)
        function caesarDecrypt(str, shift) {
            var result = '';
            for (var i = 0; i < str.length; i++) {
                var charCode = str.charCodeAt(i);
                if (charCode >= 97 && charCode <= 122) { // Minuscules
                    result += String.fromCharCode(((charCode - 97 - shift + 26) % 26) + 97);
                } else if (charCode >= 65 && charCode <= 90) { // Majuscules
                    result += String.fromCharCode(((charCode - 65 - shift + 26) % 26) + 65);
                } else {
                    result += str.charAt(i); // Pour les autres caractères comme les chiffres ou espaces
                }
            }
            return result;
        }

        function checkAnswers() {
            var answer1 = document.getElementById('answer1').value.trim().toLowerCase();
            var answer2 = document.getElementById('answer2').value.trim().toLowerCase();
            var answer3 = document.getElementById('answer3').value.trim().toLowerCase();
            var finalAnswer = document.getElementById('finalAnswer').value.trim().toLowerCase();

            // Réponses chiffrées en César (décalage de 3)
            var encryptedAnswer1 = "24"; // Pas de lettres donc pas affecté
            var encryptedAnswer2 = "uhqdug"; // "renard" décalé de 3
            var encryptedAnswer3 = "rpehu"; // "ombre" décalé de 3
            var encryptedFinalAnswer = "vkdzgrib"; // "shadowfox" décalé de 3

            // Décoder les réponses de l'utilisateur en utilisant César
            var decodedAnswer1 = encryptedAnswer1; // Pas besoin de décoder ici
            var decodedAnswer2 = caesarDecrypt(encryptedAnswer2, 3);
            var decodedAnswer3 = caesarDecrypt(encryptedAnswer3, 3);
            var decodedFinalAnswer = caesarDecrypt(encryptedFinalAnswer, 3);

            // Comparer les réponses de l'utilisateur avec les réponses décryptées
            if (answer1 === decodedAnswer1 && answer2 === decodedAnswer2 && answer3 === decodedAnswer3 && finalAnswer === decodedFinalAnswer) {
                document.getElementById('message').innerHTML = "<b>Bravo !</b> Tu as relevé l’ultime défi mais ce n'est pas fini !";
                document.getElementById('submitBtn').disabled = true;
            } else {
                document.getElementById('message').innerHTML = "<b>Erreur</b> : Au moins une réponse est incorrecte, réessaye.";
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>L’Ultime Défi</h1>
        <p>Trois énigmes, une seule vérité. Trouve les réponses et assemble-les pour découvrir mon véritable nom.</p>

        <h3>Énigme 1 : Le Nombre Caché</h3>
        <p>Si tu additionnes les chiffres du jour et du mois de ma date importante, tu obtiens ?</p>
        <input type="text" id="answer1" placeholder="Réponse en nombre">

        <h3>Énigme 2 : L'Animal Mystérieux</h3>
        <p>Je suis rusé, rapide et souvent associé au secret. Qui suis-je ?</p>
        <input type="text" id="answer2" placeholder="Un seul mot">

        <h3>Énigme 3 : L’Absence de Lumière</h3>
        <p>Je suis intangible, je suis partout et sans moi, la lumière n’a aucun sens. Que suis-je ?</p>
        <input type="text" id="answer3" placeholder="Un seul mot">

        <h3>Le Mot Final</h3>
        <p>Assemble les trois réponses et révèle mon identité.</p>
        <input type="text" id="finalAnswer" placeholder="Mot final">
        
        <button id="submitBtn" onclick="checkAnswers()">Valider</button>

        <p id="message"></p>
    </div>
    <footer>Créé pour la Quête de ShadowFox</footer>
</body>
</html>
